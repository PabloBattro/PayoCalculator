# Feature Implementation Plan â€” Payo Calculator MVP

**Overall Progress:** `65%`

## TLDR
Build a **public, indicative cross-border transfer cost estimator** for Payoneer.
- High-polish UI (Revolut/Wise quality) with animations
- Server-side pricing engine (no fees in frontend)
- 10 corridors, Payoneerâ†’Bank only for v1
- Indicative positioning with clear disclaimers

## Critical Decisions
- **Separation of concerns**: Frontend presents, backend calculates â€” pricing logic never in client
- **Config-driven pricing**: JSON seed file for MVP, DB-backed later
- **Indicative positioning**: Avoids legal risk; clear disclaimers on every quote
- **FX source**: Static mid-rates for MVP; swap to live feed without UI changes
- **Stack**: Next.js 16 + Tailwind 4 + Framer Motion â€” fast to ship, great DX, Vercel-deployable
- **UI bar**: Revolut/Wise-level polish â€” expandable breakdown, currency search, smooth animations

## Milestone 1 â€” Full E2E Pipeline âœ…

- [x] âœ… **Step 1: Project Setup & Foundation**
  - [x] âœ… Scaffold Next.js 16 app (TypeScript, Tailwind 4, ESLint, App Router)
  - [x] âœ… Configure Tailwind with Payoneer brand tokens (colors in globals.css @theme)
  - [x] âœ… Install Framer Motion
  - [x] âœ… Set up project structure (`components/`, `config/`, `lib/`, `types/`)

- [x] âœ… **Step 2: Pricing Engine & Quote API**
  - [x] âœ… Define TypeScript types (`QuoteRequest`, `QuoteResponse`, `CurrencyConfig`, `PricingRule`)
  - [x] âœ… Create `config/currencies.ts` (10 currencies + metadata + emoji flags)
  - [x] âœ… Create `config/pricing.ts` (fee rules, FX markups, ETAs per corridor with overrides)
  - [x] âœ… Implement `lib/quoteEngine.ts` (calculate fees, apply FX, compute both send/receive)
  - [x] âœ… Implement `POST /api/quote` route with input validation

- [x] âœ… **Step 3: Quote Widget â€” Core UI + Breakdown**
  - [x] âœ… `AmountInput` component (editable amount with currency symbol)
  - [x] âœ… `CurrencyDropdown` component (searchable dropdown with emoji flags)
  - [x] âœ… `QuoteWidget` container (You send / Recipient gets, bidirectional)
  - [x] âœ… Wire inputs to `/api/quote` with 350ms debounce
  - [x] âœ… Fee breakdown (expandable, mathematical notation: âˆ’, =, Ã—)
  - [x] âœ… Exchange rate display with info tooltip (mid-market rate)
  - [x] âœ… ETA display (clock icon + "Should arrive by...")
  - [x] âœ… Disclaimers (indicative, intermediary banks, route-based)
  - [x] âœ… Swap currencies button
  - [x] âœ… Framer Motion: expand/collapse fees, loading bar, section transitions

## Milestone 2 â€” UI Polish, Branding & Deployment âœ…

- [x] âœ… **Step 4: Enhanced UI Components**
  - [x] âœ… Searchable currency dropdown (replace native select)
  - [x] âœ… Copy Payoneer logo SVG to `public/` and use in header
  - [x] âœ… Skeleton loading state during API call
  - [x] âœ… Method selector (Bank transfer selected, future methods greyed out)
  - [x] âœ… Landing page layout (hero text + widget, like Revolut)
  - [x] âœ… Payoneer branding (logo, brand colors)

- [x] âœ… **Step 5: Git, GitHub & Deployment**
  - [x] âœ… Create GitHub repo & push
  - [x] âœ… Deploy to Vercel (live at payocalculator.vercel.app)
  - [x] âœ… `/embed` route for iframe injection into external sites

## Milestone 3 â€” Backend & Pricing Engine ğŸ”œ â† YOU ARE HERE

- [ ] ğŸŸ¥ **Step 6: Live FX Rates**
  - [ ] ğŸŸ¥ Integrate a free FX rate API (e.g. exchangerate.host, Open Exchange Rates)
  - [ ] ğŸŸ¥ Cache rates server-side (refresh every 15â€“60 min, avoid per-request API calls)
  - [ ] ğŸŸ¥ Fallback to static rates if API is down
  - [ ] ğŸŸ¥ Show "rate updated at" timestamp in UI

- [ ] ğŸŸ¥ **Step 7: Realistic Pricing Rules**
  - [ ] ğŸŸ¥ Review & refine fee structures per corridor (flat fees, % fees, min/max)
  - [ ] ğŸŸ¥ Review & refine FX markups per corridor
  - [ ] ğŸŸ¥ Add corridor-specific disclaimers (e.g. ARS capital controls, TRY volatility)
  - [ ] ğŸŸ¥ Add validation edge cases (min/max amounts, unsupported corridors)

- [ ] ğŸŸ¥ **Step 8: API Hardening**
  - [ ] ğŸŸ¥ Input validation (amount range, valid currency pairs)
  - [ ] ğŸŸ¥ Error responses with clear messages
  - [ ] ğŸŸ¥ Rate limiting (optional, Vercel has built-in)
  - [ ] ğŸŸ¥ API response time optimization

## Milestone 4 â€” UI Final Polish ğŸŸ¥

- [ ] ğŸŸ¥ **Step 9: Visual Refinements**
  - [ ] ğŸŸ¥ Country flag SVGs (replace emoji for cross-platform consistency)
  - [ ] ğŸŸ¥ Number counting animation on amount change
  - [ ] ğŸŸ¥ Responsive design (mobile-first)
  - [ ] ğŸŸ¥ CTA button refinement
  - [ ] ğŸŸ¥ Meta tags + SEO basics

- [ ] ğŸŸ¥ **Step 10: Quality & Accessibility**
  - [ ] ğŸŸ¥ Accessibility pass (keyboard nav, ARIA labels, focus states)
  - [ ] ğŸŸ¥ Error handling in UI (API failure, timeout, edge cases)
  - [ ] ğŸŸ¥ Code review pass
  - [ ] ğŸŸ¥ Update `docs/architecture.md` with any changes
  - [ ] ğŸŸ¥ Verify disclaimers with legal (placeholder for now)
